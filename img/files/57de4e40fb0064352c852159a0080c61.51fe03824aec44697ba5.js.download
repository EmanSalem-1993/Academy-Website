(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["57de4e40fb0064352c852159a0080c61"],{WGxL:function(e,n,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("yq1k");r("5DmW");r("07d7");r("5s+n");r("UxlC");r("hByQ");r("FZtP");Object.defineProperty(n,"__esModule",{value:true});n.verifyAndLinkOAuthAccount=n.signupUnder13=n.signup=n.makeGoogleContinueObject=n.login=n.isUsernameAvailable=n.isUsernameValid=n.isEmailValid=n.getcontinueUrlFromQueryString=n.EMAIL_REGEX=n.cleverSignup=void 0;var c=t(r("gXb0"));var o=r("skGw");var u=t(r("/eLw"));function t(e){return e&&e.__esModule?e:{default:e}}function i(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var t=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}t.forEach(function(e){a(n,e,r[e])})}return n}function a(e,n,r){if(n in e){Object.defineProperty(e,n,{value:r,enumerable:true,configurable:true,writable:true})}else{e[n]=r}return e}var s=["/coaches"];var l=function e(){var n=(0,u.default)(window.location.search);var r=n.continue||"";var t=r.replace(location.protocol+"//","").replace(location.host,"");if(s.includes(t)||(0,u.default)(window.location.search).alwayscontinue){return t}return null};n.getcontinueUrlFromQueryString=l;var f=function e(){var n=(0,u.default)(window.location.search);var r="/postlogin";var t={type:"google",referral:n.referral?n.referral:""};var a=n.alwayscontinue;var o=l()||"/";return{createchild:"".concat(r,"?").concat((0,c.default)(i({},t,{isparent:1,continue:a?o:"/createchild"}))),teacher:"".concat(r,"?").concat((0,c.default)(i({},t,{isteacher:1,continue:a?o:"/coach"}))),parent:"".concat(r,"?").concat((0,c.default)(i({},t,{isparent:1,continue:a?o:"/parent"}))),default:"".concat(r,"?").concat((0,c.default)(i({},t,{continue:o})))}};n.makeGoogleContinueObject=f;function d(t,a){return function(e){return new Promise(function(n,r){return(0,o.khanFetch)(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,o.encodeParams)(a(e))}).then(function(e){return e.json()}).then(function(e){if(e.errors){r(e)}else{n(e)}}).catch(function(e){if(e.response){e.response.json().then(function(e){return r(e)}).catch(function(e){return r(e)})}else{r(e)}})})}}var p=d("/signup/under13",function(e){return e});n.signupUnder13=p;var h=d("/signup",function(e){return i({},e,{isteacher:e.role==="teacher"?1:0,isparent:e.role==="parent"?1:0})});n.signup=h;var v=d("/signup/clever",function(e){return e});n.cleverSignup=v;var w=d("/login",function(e){return e});n.login=w;var g=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;n.EMAIL_REGEX=g;var m=function e(n){return n&&g.test(n)};n.isEmailValid=m;var b=function e(n){return n.charAt(0)!=="."&&/^[a-z][a-z0-9]{2,}$/.test(n.toLowerCase().replace(".",""))};n.isUsernameValid=b;var y=function e(n){return new Promise(function(r,t){return(0,o.khanFetch)("/api/internal/signup/check-username?".concat((0,o.encodeParams)({username:n}))).then(function(e){return r(true)}).catch(function(e){var n=e.response;if(n.status===400){r(false)}else{t()}})})};n.isUsernameAvailable=y;var O=function e(n){return new Promise(function(e,r){return(0,o.khanFetch)("/login/oauth/verify",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,o.encodeParams)({password:n})}).then(function(){return e(true)}).catch(function(e){var n=e.response;if(n.status===400){r({badRequest:true})}else if(n.status===401){r({unauthorized:true})}else{r({error:true})}})})};n.verifyAndLinkOAuthAccount=O}}]);
//# sourceMappingURL=../../sourcemaps/en/57de4e40fb0064352c852159a0080c61.51fe03824aec44697ba5.js.map